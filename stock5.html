<!DOCTYPE html>
<html>

<head>
    <title>Stock 1</title>
    <link rel="stylesheet" type="text/css" href="stockDesktopTablet.css" media="screen and (min-width:481px)">
    <link rel="stylesheet" type="text/css" href="stockPhone.css" media="screen and (max-width:480px)">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="StockData.js"></script>
</head>

<body>
    <div class="header">
        <a href="index.html">
            <h2>Trend Tracker</h2>
        </a>
    </div>
    <div class="main-content">
        <h1>TESLA</h1>
        <div class="container">
            <div id="stockChartContainer" style="width: 80%; height: 500px;">
                <canvas id="stockChart"></canvas>
                <div class="info">
                    <h2>Information</h2>
                    <h3>Market Value:</h3>
                    <p>EXAMPLE MARKET VALUE</p>
                    <h3>Price Change:</h3>
                    <p>EXAMPLE PRICE CHANGE</p>
                    <h3>Opening Price:</h3>
                    <p>EXAMPLE OPENING PRICE</p>
                    <h3>High:</h3>
                    <p>EXAMPLE HIGH</p>
                    <h3>Low:</h3>
                    <p>EXAMPLE LOW</p>
                </div>
                <label for="projected">Project return for </label>
                <input id="projected" placeholder="# of shares">
    </div>

    <script>
        // KEEP THIS FUNCTION. PLACEHOLDER IN CASE FUNCTIONS ON STOCKS1,2,3,4 DONT WORK
        const apiKey = 'A55YUYBQKSQ0G9E4';

        const symbol = 'TSLA';

        function fetchStockData() {
            const apiUrl = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${symbol}&apikey=${apiKey}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const stockData = data['Time Series (Daily)'];
                    const dates = Object.keys(stockData);
                    const closingPrices = dates.map(date => stockData[date]['4. close']);

                    const ctx = document.getElementById('stockChart').getContext('2d');
                    const stockChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: dates.reverse(),
                            datasets: [{
                                label: `${symbol} Stock Price`,
                                data: closingPrices.reverse(),
                                backgroundColor: 'rgba(0, 123, 255, 0.5)',
                                borderColor: 'rgba(0, 123, 255, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: false
                                    }
                                }]
                            }
                        }
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }
        fetchStockData();
    </script>
</body>
</html>
